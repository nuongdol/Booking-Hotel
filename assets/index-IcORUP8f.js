import{r as a,j as e,R as me}from"./react-BgARcXeA.js";import{c as he}from"./react-dom-BQ2b3uQe.js";import{a as ue}from"./axios-DBFezj-0.js";import{L as w,N as V,B as xe}from"./react-router-dom-BH99E7ct.js";import"./bootstrap-DvZwaHxN.js";import{F as je,a as ge,b as pe,c as fe,d as be,e as se,f as oe,g as te,h as Ne,i as re,j as ye,H as ve,k as ke,l as we,m as Ce,n as Se,o as De,p as Ie,q as Re}from"./react-icons-CNR7lAg2.js";import{R,C as v,a as A,b as g,c as K,B as U,F as b,d as P}from"./react-bootstrap-Zbj2cjOx.js";import{h as k}from"./moment-Cl4UOzQZ.js";import{b as _,d as z,c as L,e as Te,f as Fe,g as C}from"./react-router-BGtUUjrv.js";import{o as Pe}from"./jwt-decode-DvUShIk5.js";import{d as Oe}from"./react-date-range-d96GblB-.js";import{D as Z}from"./date-fns-Bks4fF4S.js";import"./@popperjs-DMMwm23M.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-DIvtvbay.js";import"./classnames-DYNck7rT.js";import"./@restart-BmlNYddN.js";import"./dom-helpers-BVtomV30.js";import"./uncontrollable-CejjZZJH.js";import"./@babel-ZM4fgUcq.js";import"./react-transition-group-BV-wCcjd.js";import"./prop-types-CgNndXFn.js";import"./react-list-D5SFJsVt.js";import"./shallow-equal-CEolNOlB.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))c(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function t(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(l){if(l.ep)return;l.ep=!0;const i=t(l);fetch(l.href,i)}})();const Ee="/Booking-Hotel/assets/DoubleVip_rooms-Cpzfa03t.jpg",Be="/Booking-Hotel/assets/Double_rooms-99-oXYyz.jpg",Ae="/Booking-Hotel/assets/family_rooms-DbfZzkjh.jpg",Le="/Booking-Hotel/assets/Hollywood_rooms-BQQKHeoR.jpg",Me="/Booking-Hotel/assets/King_rooms-BkZ5L93W.jpg",He="/Booking-Hotel/assets/Quad_rooms-EKuOsbm-.jpg",_e="/Booking-Hotel/assets/Queen_rooms-BFNHa8hG.jpg",$e="/Booking-Hotel/assets/single_rooms-D_E1iv9B.jpg",Ve="/Booking-Hotel/assets/singletype1_rooms-CoxhlgJq.jpg",Ye="/Booking-Hotel/assets/Studio_rooms-Bx2iw8Vq.jpg",Ue="/Booking-Hotel/assets/Suite_rooms-C-gHTq3y.jpg",ze="/Booking-Hotel/assets/Suite_rooms-C-gHTq3y.jpg",qe="/Booking-Hotel/assets/Triple_rooms-C1AEB7l6.jpg",Ge="/Booking-Hotel/assets/View_rooms-D019E6Zz.jpg",Qe="/Booking-Hotel/assets/Vip_rooms-CB2zww5S.jpg",$=[{id:"1",name:"Double Vip room",photo:Ee,roomPrice:300,description:"A room assigned to two people. May have one or more beds.The room size or area of Double Rooms are generally between 40 m² to 45 m².",roomType:"Double room"},{id:"2",name:"Double room",photo:Be,roomPrice:120,description:"A room assigned to two people. May have one or more beds.The room size or area of Double Rooms are generally between 40 m² to 45 m².",roomType:"Double room"},{id:"3",name:"Family room",photo:Ae,roomPrice:150,description:"A room assigned to one person. May have one or more beds.The room size or area of Single Rooms is generally between 37 m² to 45 m².",roomType:"Family room"},{id:"4",name:"Hollywood room",photo:Le,roomPrice:150,description:`A room that can accommodate two persons with two twin beds joined together by a common headboard. Most of budget hotels tend to provide many of these room settings which cater for both couples and parties in two.
        The room size or area of Hollywood Twin Rooms is generally between 32 m² to 40 m².`,roomType:"Hollywood room"},{id:"5",name:"King room",photo:Me,roomPrice:150,description:`A room with a king-sized bed. May be occupied by one or more people.
        The room size or area of King Rooms is generally between 32 m² to 50 m².`,roomType:"King room"},{id:"6",name:"Quad room",photo:He,roomPrice:150,description:`A room assigned to four people. May have two or more beds.
        The room size or area of Quad Rooms is generally between 70 m² to 85 m².`,roomType:"Quad room"},{id:"7",name:"Queen room",photo:_e,roomPrice:150,description:`A room with a queen-sized bed. May be occupied by one or more people.
        The room size or area of Queen Rooms is generally between 32 m² to 50 m².`,roomType:"Queen room"},{id:"8",name:"Single room",photo:$e,roomPrice:150,description:`A room assigned to one person. May have one or more beds.
        The room size or area of Single Rooms is generally between 37 m² to 45 m².`,roomType:"Single room"},{id:"9",name:"Single Vip room",photo:Ve,roomPrice:150,description:`A room assigned to one person. May have one or more beds.
        The room size or area of Single Rooms is generally between 37 m² to 45 m².`,roomType:"Single room"},{id:"10",name:"Studio room",photo:Ye,roomPrice:150,description:`A room with a studio bed- a couch which can be converted into a bed.
        May also have an additional bed.`,roomType:"Studio room"},{id:"11",name:"Suite room",photo:Ue,roomPrice:150,description:`A parlour or living room connected with to one or more bedrooms. (A room with one or more bedrooms and a separate living space.)
        The room size or area of Suite rooms is generally between 70 m² to 100 m².`,roomType:"Suite room"},{id:"12",name:"Suite Vip room",photo:ze,roomPrice:150,description:`A parlour or living room connected with to one or more bedrooms. (A room with one or more bedrooms and a separate living space.)
        The room size or area of Suite rooms is generally between 70 m² to 100 m².`,roomType:"SuiteVip room"},{id:"13",name:"Triple room",photo:qe,roomPrice:150,description:`A room with a studio bed- a couch which can be converted into a bed.
        May also have an additional bed.`,roomType:"Triple room"},{id:"14",name:"View room",photo:Ge,roomPrice:150,description:`This room type is mainly designed for disabled guests and it is required by law that hotels must provide a certain number of accessible rooms to avoid discrimination.
        The room size or area of Accessible Room Types is generally between 30 m² to 42 m².`,roomType:"View room"},{id:"15",name:"Vip room",photo:Qe,roomPrice:150,description:`Rooms close to each other, perhaps across the hall.
        The room size or area of Adjacent Room Types is generally between 30 m² to 45 m².`,roomType:"Vip_room"}],ne=[{id:"1",numOfAdults:2,numOfChildren:1,bookingConfirmationCode:"6252183955",checkInDate:"2024-04-27",checkOutDate:"2024-04-30",guestEmail:"chanh@gmail.com",guestFullName:"dangchanh",roomId:"1"},{id:"2",numOfAdults:1,numOfChildren:1,bookingConfirmationCode:"6844061853",checkInDate:"2024-04-23",checkOutDate:"2024-04-24",guestEmail:"oanh@gmail.com",guestFullName:"dangoanh",roomId:"2"},{id:"3",numOfAdults:2,numOfChildren:1,bookingConfirmationCode:"8170312690",checkInDate:"2024-05-01",checkOutDate:"2024-05-03",guestEmail:"phuong@gmail.com",guestFullName:"dangkimphuong",roomId:"3"},{id:"4",numOfAdults:1,numOfChildren:1,bookingConfirmationCode:"8980089960",checkInDate:"2024-05-06",checkOutDate:"2024-05-08",guestEmail:"xo@gmail.com",guestFullName:"dangxo",roomId:"4"},{id:"5",numOfAdults:2,numOfChildren:2,bookingConfirmationCode:"4784318900",checkInDate:"2024-05-12",checkOutDate:"2024-05-13",guestEmail:"nuong@gmail",guestFullName:"dangnuong",roomId:"5"},{id:"6",numOfAdults:2,numOfChildren:0,bookingConfirmationCode:"9474520597",checkInDate:"2024-05-18",checkOutDate:"2024-05-19",guestEmail:"son@gmail.com",guestFullName:"dangson",roomId:"6"},{id:"7",numOfAdults:2,numOfChildren:1,bookingConfirmationCode:"3269253248",checkInDate:"2024-05-14",checkOutDate:"2024-05-17",guestEmail:"phuong@email",guestFullName:"dangkimphuong",roomId:"7"},{id:"8",numOfAdults:2,numOfChildren:3,bookingConfirmationCode:"12882286308",checkInDate:"2024-05-05",checkOutDate:"2024-05-06",guestEmail:"oanh@email.com",guestFullName:"oanhdang",roomId:"8"},{id:"9",numOfAdults:1,numOfChildren:1,bookingConfirmationCode:"6604962167",checkInDate:"2024-05-04",checkOutDate:"2024-05-05",guestEmail:"thuy@email.com",guestFullName:"thuy",roomId:"9"}],We=[{email:"nuongdang@gmail.com",password:"12345678"}],I=ue.create({baseURL:"http://localhost:9192"}),E=()=>({Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"});async function Ke(s,o,t){const c=new FormData;return c.append("photo",s),c.append("roomType",o),c.append("roomPrice",t),(await I.post("/rooms/add/new-room",c,{headers:E()})).status===201}async function Ze(){try{return(await I.get("/rooms/room/types")).data}catch{throw new Error("Error fetching room types")}}async function q(){try{return $}catch{throw new Error("Error fetching rooms")}}async function Je(s){try{return(await I.delete(`/rooms/delete/room/${s}`,{headers:E()})).data}catch(o){throw new Error(`Error deleting room ${o.message}`)}}async function Xe(s,o){const t=new FormData;return t.append("roomType",o.roomType),t.append("roomPrice",o.roomPrice),t.append("photo",o.photo),await I.put(`/rooms/update/${s}`,t,{headers:E()})}async function M(s){try{return $.find(t=>t.id===s)}catch(o){throw new Error(`Error fetching room ${o.message}`)}}async function es(s,o){try{return(await I.post(`/bookings/room/${s}/booking`,o)).data}catch(t){throw t.response&&t.response.data?new Error(t.response.data):new Error(`Error booking room : ${t.message}`)}}async function J(){try{return ne}catch(s){throw new Error(`Error fetching bookings : ${s.message}`)}}async function ss(s){try{return ne.find(t=>t.bookingConfirmationCode===s)}catch(o){throw o.response&&o.response.data?new Error(o.response.data):new Error(`Error find booking : ${o.message}`)}}async function ae(s){try{return(await I.delete(`/bookings/booking/${s}/delete`)).data}catch(o){throw new Error(`Error cancelling booking :${o.message}`)}}async function os(s,o,t){return await I.get(`rooms/available-rooms?checkInDate=${s}
		&checkOutDate=${o}&roomType=${t}`)}async function ts(s){try{return(await I.post("/auth/register-user",s)).data}catch(o){throw o.reeponse&&o.response.data?new Error(o.response.data):new Error(`User registration error : ${o.message}`)}}async function rs(s){try{const o=We;return o.status>=200&&o.status<300?o:null}catch(o){return console.error(o),null}}async function ns(s){try{return(await I.delete(`/users/delete/${s}`,{headers:E()})).data}catch(o){return o.message}}async function as(s,o){try{return(await I.get(`/users/${s}`,{headers:E()})).data}catch(t){throw t}}async function ls(s,o){try{return(await I.get(`/bookings/user/${s}/bookings`,{headers:E()})).data}catch(t){throw console.error("Error fetching bookings:",t.message),new Error("Failed to fetch bookings")}}const G=({handleRoomInputChange:s,newRoom:o})=>{const[t,c]=a.useState([""]),[l,i]=a.useState(!1),[d,n]=a.useState("");a.useEffect(()=>{Ze().then(x=>{c(x)})},[]);const r=x=>{n(x.target.value)},h=()=>{d!==""&&(c([...t,d]),n(""),i(!1))};return e.jsx(e.Fragment,{children:t.length>0&&e.jsxs("div",{children:[e.jsxs("select",{className:"form-control",id:"roomType",name:"roomType",value:o.roomType,onChange:x=>{x.target.value==="Add New"?i(!0):s(x)},children:[e.jsx("option",{value:"",children:"select a room type"}),e.jsx("option",{value:"Add New",children:"Add New"}),t.map((x,j)=>e.jsx("option",{value:x,children:x},j))]}),l&&e.jsxs("div",{className:"input-group",children:[e.jsx("input",{className:"form-control",type:"text",placeholder:"Enter a new room type",onChange:r}),e.jsx("button",{className:"btn btn-hotel",type:"button",onClick:h,children:"Add"})]})]})})},cs=()=>{const[s,o]=a.useState({photo:null,roomType:"",roomPrice:""}),[t,c]=a.useState(""),[l,i]=a.useState(""),[d,n]=a.useState(""),r=j=>{const m=j.target.name;let u=j.target.value;m==="roomPrice"&&(isNaN(u)?u="":u=parseInt(u)),o({...s,[m]:u})},h=j=>{const m=j.target.files[0];o({...s,photo:m}),c(URL.createObjectURL(m))},x=async j=>{j.preventDefault();try{await Ke(s.photo,s.roomType,s.roomPrice)!==void 0?(i("A new room was added to the database."),o({photo:null,roomType:"",roomPrice:""}),c(""),n("")):n("Error adding room")}catch(m){n(m.message)}setTimeout(()=>{i(""),n("")},3e3)};return e.jsx(e.Fragment,{children:e.jsx("section",{className:"container, mt-5 mb-5",children:e.jsx("div",{className:"row justify-content-center",children:e.jsxs("div",{className:"col-md-8 col-lg-6",children:[e.jsx("h2",{className:"mt-5 mb-2",children:"Add a New Room"}),l&&e.jsx("div",{className:"alert alert-success fade show",children:l}),d&&e.jsx("div",{className:"alert alert-danger fade show",children:d}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"roomType",className:"form-label",children:"Room Type"}),e.jsx("div",{children:e.jsx(G,{handleRoomInputChange:r,newRoom:s})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"roomPrice",className:"form-label",children:"Room Price"}),e.jsx("input",{className:"form-control",required:!0,id:"roomPrice",type:"number",name:"roomPrice",value:s.roomPrice,onChange:r})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"photo",className:"form-label",children:"Room Photo"}),e.jsx("input",{id:"photo",name:"photo",type:"file",className:"form-control",onChange:h}),t&&e.jsx("img",{src:t,alt:"Preview Room Photo",style:{maxWidth:"400px",maxHeight:"400px"},className:"mb-3"})]}),e.jsxs("div",{className:"d-grid d-md-flex mt-2",children:[e.jsx(w,{to:"/existing-rooms",className:"btn btn-outline-info",children:"Back"}),e.jsx("button",{className:"btn btn-outline-primary ml-5",children:"Save Room"})]})]})]})})})})},le=({data:s,setFilteredData:o})=>{const[t,c]=a.useState(""),l=n=>{const r=n.target.value;c(r);const h=s.filter(x=>x.roomType.toLowerCase().includes(r.toLowerCase()));o(h)},i=()=>{c(""),o(s)},d=[...new Set(s.map(n=>n.roomType))];return e.jsxs("div",{className:"input-group mb-3",children:[e.jsx("span",{className:"input-group-text",id:"room-type-filter",children:"Filter rooms by type"}),e.jsxs("select",{className:"form-select",value:t,onChange:l,children:[e.jsx("option",{value:"",children:"select a room type to filter....."}),d.map((n,r)=>e.jsx("option",{value:String(n),children:String(n)},r))]}),e.jsx("button",{className:"btn btn-hotel",type:"button",onClick:i,children:"Clear Filter"})]})},H=({currentPage:s,totalPages:o,onPageChange:t})=>{const c=Array.from({length:o},(l,i)=>i+1);return e.jsx("nav",{children:e.jsx("ul",{className:"pagination justify-content-center",children:c.map(l=>e.jsx("li",{className:`page-item ${s===l?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>t(l),children:l})},l))})})},is=()=>{const[s,o]=a.useState([]),[t,c]=a.useState(1),[l]=a.useState(8),[i,d]=a.useState(!1),[n,r]=a.useState([]),[h,x]=a.useState(""),[j,m]=a.useState(""),[u,p]=a.useState("");a.useEffect(()=>{y()},[]);const y=async()=>{d(!0);try{const N=await q();o(N),d(!1)}catch(N){p(N.message)}};a.useEffect(()=>{if(h==="")r(s);else{const N=s.filter(F=>F.roomType===h);r(N)}c(1)},[s,h]);const T=N=>{c(N)},O=async N=>{try{const F=await Je(N);F===""?(m(`Room No ${N} was delete.`),y()):console.error(`Error deleting room: ${F.message}`)}catch(F){p(F.message)}setTimeout(()=>{m(""),p("")},3e3)},S=(N,F,ie)=>{const de=N.length>0?N.length:ie.length;return Math.ceil(de/F)},f=t*l,D=f-l,B=n.slice(D,f);return e.jsx(e.Fragment,{children:i?e.jsx("p",{children:"Loading existing rooms"}):e.jsx(e.Fragment,{children:e.jsxs("section",{className:"mt-5 mb-5 container",children:[e.jsx("div",{className:"d-flex justify-content-between mb-3 mt-5",children:e.jsx("h2",{children:"Existing rooms"})}),e.jsxs(R,{children:[e.jsx(v,{md:6,className:"mb-3 mb-md-0",children:e.jsx(le,{data:s,setFilteredData:r})}),e.jsx(v,{md:6,className:"d-flex justify-content-end",children:e.jsxs(w,{to:"/add-room",children:[e.jsx(je,{})," Add Room"]})})]}),e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Room Type"}),e.jsx("th",{children:"Room Price"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:B.map(N=>e.jsxs("tr",{className:"text-center",children:[e.jsx("td",{children:N.id}),e.jsx("td",{children:N.roomType}),e.jsx("td",{children:N.roomPrice}),e.jsxs("td",{className:"gap-2",children:[e.jsxs(w,{to:`/edit-room/${N.id}`,children:[e.jsx("span",{className:"btn btn-info btn-sm",children:e.jsx(ge,{})}),e.jsx("span",{className:"btn btn-warning btn-sm",children:e.jsx(pe,{})})]}),e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>O(N.id),children:e.jsx(fe,{})})]})]},N.id))})]}),e.jsx(H,{currentPage:t,totalPages:S(n,l,s),onPageChange:T})]})})})},ds=()=>e.jsxs("header",{className:"header-banner",children:[e.jsx("div",{className:"overlay"}),e.jsxs("div",{className:"animated-texts overlay-content",children:[e.jsxs("h1",{children:["Welcome to ",e.jsx("span",{className:"hotel-color",children:"Booking Hotel"})]}),e.jsx("h4",{children:"Experience the best Hospitality in Town"})]})]}),Q=({title:s})=>e.jsxs("header",{className:"header",children:[e.jsx("div",{className:"overlay"}),e.jsx("div",{className:"container",children:e.jsx("h1",{className:"header-title text-center",children:s})})]}),ms=()=>e.jsx(e.Fragment,{children:e.jsxs(A,{className:"mb-2",children:[e.jsx(Q,{title:"Our Service"}),e.jsx(R,{children:e.jsxs("h4",{className:"text-center",children:[e.jsx("span",{className:"hotel-color",children:" Services at Booking-Hotel"})," ",e.jsxs("span",{className:"gap-2 hotel-color",children:[e.jsx(be,{}),"  - 24-Hour Front Desk"]})]})}),e.jsx("hr",{}),e.jsxs(R,{xs:1,md:2,lg:3,className:"g-4 mt-2",children:[e.jsx(v,{children:e.jsx(g,{children:e.jsxs(g.Body,{children:[e.jsxs(g.Title,{className:"hotel-color",children:[e.jsx(se,{})," WiFi"]}),e.jsx(g.Text,{children:"Stay connected with high-speed internet access."})]})})}),e.jsx(v,{children:e.jsx(g,{children:e.jsxs(g.Body,{children:[e.jsxs(g.Title,{className:"hotel-color",children:[e.jsx(oe,{})," Breakfast"]}),e.jsx(g.Text,{children:"Star"})]})})}),e.jsx(v,{children:e.jsx(g,{children:e.jsxs(g.Body,{children:[e.jsxs(g.Title,{className:"hotel-color",children:[e.jsx(te,{})," Laundry"]}),e.jsx(g.Text,{children:"Keep your clothes clean and fresh with ouer laundry service."})]})})}),e.jsx(v,{children:e.jsx(g,{children:e.jsxs(g.Body,{children:[e.jsxs(g.Title,{className:"hotel-color",children:[e.jsx(Ne,{})," Mini-bar"]}),e.jsx(g.Text,{children:"Enjoy a refreshing drink or snack from our in-room mini-bar."})]})})}),e.jsx(v,{children:e.jsx(g,{children:e.jsxs(g.Body,{children:[e.jsxs(g.Title,{className:"hotel-color",children:[e.jsx(re,{})," Parking"]}),e.jsx(g.Text,{children:"Park your car converniently in our on-site parking lot."})]})})}),e.jsx(v,{children:e.jsx(g,{children:e.jsxs(g.Body,{children:[e.jsxs(g.Title,{className:"hotel-color",children:[e.jsx(ye,{})," Air conditioning"]}),e.jsx(g.Text,{children:"Stay cool and comfortable with our air conditioning system."})]})})})]})]})}),X=()=>e.jsx("div",{className:"parallax mb-5",children:e.jsx(A,{className:"text-center px-5 py-5 justify-content-center",children:e.jsxs("div",{className:"animated-texts bounceIn",children:[e.jsxs("h1",{children:["Welcome to ",e.jsx("span",{className:"hotel-color",children:"Booking Hotel"})]}),e.jsx("h3",{children:"We offer the best services for all your needs"})]})})}),Y=()=>{const[s,o]=a.useState([{id:"",roomType:"",roomPrice:"",photo:""}]),[t,c]=a.useState(""),[l,i]=a.useState(!1);return a.useEffect(()=>{i(!0),q().then(d=>{o(d),i(!1)}).catch(d=>{c(d.message),i(!1)})},[]),l?e.jsx("div",{className:"mt-5",children:"Loading room...."}):t?e.jsxs("div",{className:"text-danger mb-5 mt-5",children:["Error: ",t]}):e.jsxs("section",{className:"bg-light mb-5 mt-5 shadow",children:[e.jsx(w,{to:"/browse-all-rooms",className:"hotel-color text-center",children:"Browse all rooms"}),e.jsx(A,{children:e.jsx(K,{indicators:!1,children:[...Array(Math.ceil(s.length/4))].map((d,n)=>e.jsx(K.Item,{children:e.jsx(R,{children:s.slice(n*4,n*4+4).map(r=>e.jsx(v,{className:"mb-4",xs:12,md:6,lg:3,children:e.jsxs(g,{children:[e.jsx(w,{to:`/book-room/${r.id}`,children:e.jsx(g.Img,{variant:"top",src:r.photo,alt:"Room Photo",className:"w-100",style:{height:"200px"}})}),e.jsxs(g.Body,{children:[e.jsx(g.Title,{className:"hotel-color",children:r.roomType}),e.jsxs(g.Title,{className:"room-price",children:[r.roomPrice,"$/night"]})]}),e.jsx("div",{className:"flex-skrink-0 mt-3",children:e.jsx(w,{to:`/book-room/${r.id}`,className:"btn btn-hotel btn-sm",children:"Book Now"})})]})},r.id))})},n))})})]})},ce=({room:s})=>e.jsx(v,{className:"mb-4",xs:12,children:e.jsx(g,{children:e.jsxs(g.Body,{className:"d-flex flex-wrap align-items-center",children:[e.jsx("div",{className:"flex-shrink-0 mr-3 mb-3 mb-md-0",children:e.jsx(w,{to:`/book-room/${s.id}`,children:e.jsx(g.Img,{variant:"top",src:s.photo,alt:"Room Photo",style:{width:"100%",maxWidth:"200px",height:"auto"}})})}),e.jsxs("div",{className:"flex-grow-1 ml-3 px-5",children:[e.jsx(g.Title,{className:"hotel-color",children:s.roomType}),e.jsxs(g.Title,{className:"room-price",children:[s.roomPrice,"$/night"]}),e.jsx(g.Text,{children:s.description}),e.jsxs("div",{className:"like",children:[e.jsx("p",{children:"Vote like"}),e.jsx(ve,{})]})]}),e.jsx("div",{className:"flex-skrink-0 mt-3",children:e.jsx(w,{to:`/book-room/${s.id}`,className:"btn btn-hotel btn-sm",children:"Book Now"})})]})})},s.id),hs=({results:s,onClearSearch:o})=>{const[t,c]=a.useState(1),l=3,i=s?s.length:0,d=Math.ceil(i/l),n=j=>{c(j)},r=(t-1)*l,h=r+l,x=s.slice(r,h);return e.jsx(e.Fragment,{children:s.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h5",{className:"text-center mt-5",children:"Search Result"}),e.jsx(R,{children:x.map(j=>e.jsx(ce,{room:j},j.id))}),e.jsxs(R,{children:[i>l&&e.jsx(H,{currentPage:t,totalPages:d,onPageChange:n}),e.jsx(U,{variant:"secondary",onClick:o,children:"Clear Search"})]})]}):e.jsx("p",{})})},us=()=>{const[s,o]=a.useState({checkInDate:"",checkOutDate:"",roomType:""}),[t,c]=a.useState(""),[l,i]=a.useState([]),[d,n]=a.useState(!1),r=j=>{j.preventDefault();const m=k(s.checkInDate),u=k(s.checkOutDate);if(!m.isValid()||!u.isValid()){c("Please enter valid dates");return}if(!u.isSameOrAfter(m)){c("Check-out date must be after check-in date");return}n(!0),os(s.checkInDate,s.checkOutDate,s.roomType).then(p=>{i(p.data),setTimeout(()=>n(!1),2e3)}).catch(p=>{console.log(p)}).finally(()=>{n(!1)})},h=j=>{const{name:m,value:u}=j.target;o({...s,[m]:u});const p=k(s.checkInDate),y=k(s.checkOutDate);p.isValid()&&y.isValid()&&c("")},x=()=>{o({checkInDate:"",checkOutDate:"",roomType:""}),i([])};return e.jsx(e.Fragment,{children:e.jsxs(A,{className:"shadow mt-n5 mb-5 py-5",children:[e.jsx(b,{onSubmit:r,children:e.jsxs(R,{className:"justify-content-center",children:[e.jsx(v,{xs:12,md:3,children:e.jsxs(b.Group,{controlId:"checkInDate",children:[e.jsx(b.Label,{children:"Check-in Date"}),e.jsx(b.Control,{type:"date",name:"checkInDate",value:s.checkInDate,onChange:h,min:k().format("YYYY-MM-DD")})]})}),e.jsx(v,{xs:12,md:3,children:e.jsxs(b.Group,{controlId:"checkOutDate",children:[e.jsx(b.Label,{children:"Check-out Date"}),e.jsx(b.Control,{type:"date",name:"checkOutDate",value:s.checkOutDate,onChange:h,min:k().format("YYYY-MM-DD")})]})}),e.jsx(v,{xs:12,md:3,children:e.jsxs(b.Group,{controlId:"roomType",children:[e.jsx(b.Label,{children:"Room Type"}),e.jsxs("div",{className:"d-flex",children:[e.jsx(G,{handleRoomInputChange:h,newRoom:s}),e.jsx(U,{variant:"secondary",type:"submit",className:"ml-2",children:"Search"})]})]})})]})}),d?e.jsx("p",{className:"mt-4",children:"Finding availble rooms...."}):l?e.jsx(hs,{results:l,onClearSearch:x}):e.jsx("p",{className:"mt-4",children:"No rooms available for the selected dates and room type."}),t&&e.jsx("p",{className:"text-danger",children:t})]})})},xs=()=>{const s=_(),o=s.state&&s.state.message,t=localStorage.getItem("userId");return e.jsxs("section",{children:[o&&e.jsx("p",{className:"text-warning px-5",children:o}),t&&e.jsxs("h6",{className:"text-success text-center",children:["You are logged-In as ",t]}),e.jsx(ds,{}),e.jsxs("div",{className:"container",children:[e.jsx(us,{}),e.jsx(Y,{}),e.jsx(X,{}),e.jsx(Y,{}),e.jsx(ms,{}),e.jsx("hr",{}),e.jsx(X,{})]})]})},js=()=>{const[s,o]=a.useState({photo:null,roomType:"",roomPrice:""}),[t,c]=a.useState(""),[l,i]=a.useState(""),[d,n]=a.useState(""),{roomId:r}=z(),h=u=>{const p=u.target.files[0];o({...s,photo:p}),c(URL.createObjectURL(p))},x=u=>{const{name:p,value:y}=u.target;o({...s,[p]:y})},j=async()=>{try{const u=await M(r);o(u),c(u.photo)}catch(u){console.error(u)}};a.useEffect(()=>{j()},[r]);const m=async u=>{u.preventDefault();const p=await Xe(r,s);try{if(p.status===200){i("Room updated successfully!");const y=await M(r);o(y),c(y.photo),n("")}else n("Error updating room")}catch(y){console.error(y),n(y.message)}};return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"container, mt-5 mb-5",children:[e.jsx("h3",{className:"text-center mt-5 mt-5",children:"Edit a Room"}),e.jsx("div",{className:"row justify-content-center",children:e.jsxs("div",{className:"col-md-8 col-lg-6",children:[l&&e.jsx("div",{className:"alert alert-success",role:"alert",children:l}),d&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:d}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"roomType",className:"form-label",children:"Room Type"}),e.jsx("div",{children:e.jsx(G,{handleRoomInputChange:x,newRoom:s})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"roomPrice",className:"form-label",children:"Room Price"}),e.jsx("input",{className:"form-control",required:!0,id:"roomPrice",type:"number",name:"roomPrice",value:s.roomPrice,onChange:x})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"photo",className:"form-label hotel-color",children:"Room Photo"}),e.jsx("input",{required:!0,type:"file",id:"photo",name:"photo",className:"form-control",onChange:h}),t&&e.jsx("img",{src:t,alt:"Preview Room Photo",style:{maxWidth:"400px",maxHeight:"400px"},className:"mb-3"})]}),e.jsxs("div",{className:"d-grid d-md-flex mt-2",children:[e.jsx(w,{to:"/existing-rooms",className:"btn btn-outline-info ml-5",children:"Back"}),e.jsx("button",{className:"btn btn-outline-warning",children:"Edit Room"})]})]})]})})]})})},W=a.createContext({user:null,handleLogin:s=>{},handleLogout:()=>{}}),gs=({children:s})=>{const[o,t]=a.useState(null),c=i=>{const d=Pe(i);localStorage.setItem("userId",d.sub),localStorage.setItem("userRole",d.roles),localStorage.setItem("token",i),t(d)},l=()=>{localStorage.removeItem("userId"),localStorage.removeItem("userRole"),localStorage.removeItem("token"),t(null)};return e.jsx(W.Provider,{value:{user:o,handleLogin:c,handleLogout:l},children:s})},ps=()=>a.useContext(W),fs=()=>{const s=a.useContext(W),o=L(),t=()=>{s.handleLogout(),o("/",{state:{message:" You have been logged out!"}})};return e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(w,{className:"dropdown-item",to:"/profile",children:"Profile"})}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider"})}),e.jsx("button",{className:"dropdown-item",onClick:t,children:"Logout"})]})},bs=()=>{const[s,o]=a.useState(!1),t=()=>{o(!s)},c=localStorage.getItem("token");return localStorage.getItem("userRole"),e.jsx("nav",{className:"navbar navbar-expand-lg bg-body-tertiary px-5 shadow mt-5 sticky-top",children:e.jsxs("div",{className:"container-fluid",children:[e.jsx(w,{to:"/",className:"navbar-brand",children:e.jsx("span",{className:"hotel-color",children:"Booking Hotel"})}),e.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarScroll","aria-controls":"navbarScroll","aria-expanded":"false","aria-label":"Toggle navigation",children:e.jsx("span",{className:"navbar-toggler-icon"})}),e.jsxs("div",{className:"collapse navbar-collapse",id:"navbarScroll",children:[e.jsxs("ul",{className:"navbar-nav me-auto my-2 my-lg-0 navbar-nav-scroll",children:[e.jsx("li",{className:"nav-item",children:e.jsx(V,{className:"nav-link","aria-current":"page",to:"/browse-all-rooms",children:"Browse all rooms"})}),e.jsx("li",{className:"nav-item",children:e.jsx(V,{className:"nav-link","aria-current":"page",to:"/admin",children:"Admin"})})]}),e.jsxs("ul",{className:"d-flex navbar-nav",children:[e.jsx("li",{className:"nav-item",children:e.jsx(V,{className:"nav-link",to:"/find-booking",children:"Find my booking"})}),e.jsxs("li",{className:"nav-item dropdown",children:[e.jsxs("a",{className:`nav-link dropdown-toggle ${s?"show":""}`,href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:t,children:[" ","Account"]}),e.jsx("ul",{className:`dropdown-menu ${s?"show":""}`,"aria-labelledby":"navbarDropdown",children:c?e.jsx(fs,{}):e.jsx("li",{children:e.jsx(w,{className:"dropdown-item",to:"/login",children:"Login"})})})]})]})]})]})})},Ns=()=>{let s=new Date;return e.jsxs("footer",{className:"bg-dark text-white",children:[e.jsx("div",{className:"container py-5",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("h5",{children:"Company"}),e.jsxs("ul",{className:"list-unstyled",children:[e.jsx("li",{className:"hotel-color",children:e.jsx("a",{href:"#",children:"About Us"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Careers"})}),e.jsx("li",{children:e.jsxs("a",{href:"#",children:[e.jsx(ke,{})," +1 25378495030"]})})]})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("h5",{children:"Services"}),e.jsxs("ul",{className:"list-unstyled",children:[e.jsx("li",{children:e.jsx("a",{href:"#",children:"Booking Hotel"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Development"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Marketing"})})]})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("h5",{children:"Connect"}),e.jsxs("ul",{className:"list-unstyled",children:[e.jsx("li",{children:e.jsx("a",{href:"#",children:e.jsx(we,{})})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:e.jsx(Ce,{})})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:e.jsx(Se,{})})})]})]})]})}),e.jsx("div",{className:"bg-dark py-3",children:e.jsx("div",{className:"container text-center",children:e.jsxs("p",{className:"mb-0",children:["© ",s.getFullYear()," Booking Hotel. All Rights Reserved."]})})})]})},ys=()=>{const[s,o]=a.useState([]),[t,c]=a.useState(null),[l,i]=a.useState(!1),[d,n]=a.useState(1),[r]=a.useState(6),[h,x]=a.useState([{id:""}]);if(a.useEffect(()=>{i(!0),q().then(p=>{o(p),x(p),i(!1)}).catch(p=>{c(p.message),i(!1)})},[]),l)return e.jsx("div",{className:"text-danger",children:"Loading room......"});if(t)return e.jsxs("div",{children:["Error : ",t]});const j=p=>{n(p)},m=Math.ceil(h.length/r),u=()=>{const p=(d-1)*r,y=p+r;return h.slice(p,y).map(T=>e.jsx(ce,{room:T},T.id))};return e.jsxs(A,{children:[e.jsxs(R,{children:[e.jsx(v,{md:6,className:"mb-3 mb-md=0",children:e.jsx(le,{data:s,setFilteredData:x})}),e.jsx(v,{md:6,className:"d-flex align-items-center justify-content-end",children:e.jsx(H,{currentPage:d,totalPages:m,onPageChange:j})})]}),e.jsx(R,{children:u()}),e.jsx(R,{children:e.jsx(v,{md:6,className:"d-flex align-items-center justify-content-end",children:e.jsx(H,{currentPage:d,totalPages:m,onPageChange:j})})})]})},vs=()=>e.jsx("section",{className:"bg-light p-2 mb-5 mt-5 shadow",children:e.jsx(ys,{})}),ks=()=>e.jsxs("section",{className:"container mt-5",children:[e.jsx("h2",{children:"Welcome to Admin Pannel"}),e.jsx("hr",{}),e.jsx(w,{to:"/existing-rooms",children:"Manage Rooms"})," ",e.jsx("br",{}),e.jsx(w,{to:"/existing-bookings",children:"Manage Bookings"})]}),ws=({booking:s,payment:o,isFormValid:t,onConfirm:c})=>{const l=k(s.checkInDate),d=k(s.checkOutDate).diff(l,"days"),[n,r]=a.useState(!1),[h,x]=a.useState(!1),j=L(),m=()=>{x(!0),setTimeout(()=>{x(!1),r(!0),c()},3e3)};return a.useEffect(()=>{n&&j("/booking-success")},[n,j]),e.jsxs("div",{className:"card card-body mt-5",children:[e.jsx("h4",{className:"hotel-color",children:"Reservation Summary"}),e.jsxs("p",{children:["FullName : ",e.jsx("strong",{children:s.guestFullName})]}),e.jsxs("p",{children:["Email : ",e.jsx("strong",{children:s.guestEmail})]}),e.jsxs("p",{children:["Check-In Date : ",e.jsx("strong",{children:k(s.checkInDate).format("MMM Do YYYY")})]}),e.jsxs("p",{children:["Check-Out Date : ",e.jsx("strong",{children:k(s.checkOutDate).format("MMM Do YYYY")})]}),e.jsxs("p",{children:["Number of Days : ",e.jsx("strong",{children:d})]}),e.jsxs("div",{children:[e.jsx("h5",{children:"Number of Guests"}),e.jsxs("strong",{children:["Adult",s.numOfAdults>1?"s":""," : ",s.numOfAdults]})]}),e.jsx("div",{children:e.jsxs("strong",{children:["Children : ",s.numOfChildren]})}),o()>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Total Payment: ",e.jsxs("strong",{children:["$",o()]})]}),t&&!n?e.jsx(U,{variant:"success",onClick:m,children:h?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Booking Confirmed, redirecting to payment....."]}):"Confirm Booking and proceed to payment"}):n?e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading"})})}):null]}):e.jsx("p",{className:"text-danger",children:"Check-out date must be after check-in date"})]})},Cs=()=>{const[s,o]=a.useState(!1),[t,c]=a.useState(!1),[l,i]=a.useState(""),[d,n]=a.useState(0),[r,h]=a.useState({guestFullName:"",guestEmail:"",checkInDate:"",checkOutDate:"",numOfChildren:"",numOfAdults:""});a.useState({photo:"",roomType:"",roomPrice:""});const{roomId:x}=z(),j=L(),m=f=>{const{name:D,value:B}=f.target;h({...r,[D]:B}),i("")},u=async f=>{try{const D=await M(f);n(D.roomPrice)}catch(D){throw new Error(D)}};a.useEffect(()=>{u(x)},[x]);const p=()=>{const f=k(r.checkInDate);return k(r.checkOutDate).diff(f,"days")*(d||0)},y=()=>{const f=parseInt(r.numOfAdults),D=parseInt(r.numOfChildren);return f+D>=1&&f>=1},T=()=>k(r.checkOutDate).isSameOrAfter(k(r.checkInDate))?(i(""),!0):(i("Check-out date must come before check-in date."),!1),O=f=>{f.preventDefault(),f.currentTarget.checkValidity()===!1||!y()||!T()?f.stopPropagation():c(!0),o(!0)},S=async()=>{try{const f=await es(x,r);c(!0),j("/booking-success",{state:{message:f}})}catch(f){i(f.message),j("/booking-success",{state:{error:l}})}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container mb-5",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card card-body mt-5",children:[e.jsx("h4",{className:"card-title",children:"Reserve Room"}),e.jsxs(b,{noValidate:!0,validated:s,onSubmit:O,children:[e.jsxs(b.Group,{children:[e.jsx(b.Label,{htmlFor:"guestFullName",className:"hotel-color",children:"Full Name : "}),e.jsx(P,{required:!0,type:"text",id:"guestFullName",name:"guestFullName",value:r.guestFullName,placeholder:"Enter your full name",onChange:m}),e.jsx(b.Control.Feedback,{type:"invalid",children:"Please enter your fullname"})]}),e.jsxs(b.Group,{children:[e.jsx(b.Label,{htmlFor:"guestEmail",className:"hotel-color",children:"Email: "}),e.jsx(P,{required:!0,type:"email",id:"guestEmail",name:"guestEmail",value:r.guestEmail,placeholder:"Enter your email",onChange:m}),e.jsx(b.Control.Feedback,{type:"invalid",children:"Please enter your email address"})]}),e.jsxs("fieldset",{style:{border:"2px"},children:[e.jsx("legend",{children:"Lodging period"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6",children:[e.jsx(b.Label,{htmlFor:"checkInDate",className:"hotel-color",children:"Check-In date: "}),e.jsx(P,{required:!0,type:"date",id:"checkInDate",name:"checkInDate",value:r.checkInDate,placeholder:"Check-in date",onChange:m}),e.jsx(b.Control.Feedback,{type:"invalid",children:"Please select a check-in date"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx(b.Label,{htmlFor:"checkOutDate",className:"hotel-color",children:"Check-Out date: "}),e.jsx(P,{required:!0,type:"date",id:"checkOutDate",name:"checkOutDate",value:r.checkOutDate,placeholder:"Check-out date",onChange:m}),e.jsx(b.Control.Feedback,{type:"invalid",children:"Please select a check-out date"})]}),l&&e.jsx("p",{className:"error-message text-danger ",children:l})]})]}),e.jsxs("fieldset",{children:[e.jsx("legend",{children:"Number of Guest"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6",children:[e.jsx(b.Label,{htmlFor:"numOfAdults",className:"hotel-color",children:"Adults: "}),e.jsxs(e.Fragment,{children:[e.jsx(P,{required:!0,type:"number",id:"numOfAdults",name:"numOfAdults",value:r.numOfAdults,placeholder:"0",min:1,onChange:m}),e.jsx(P.Feedback,{type:"invalid",children:"Please select at least 1 adult."})]})]}),e.jsxs("div",{className:"col-6",children:[e.jsx(b.Label,{htmlFor:"numOfChildren",className:"hotel-color",children:"Children: "}),e.jsx(P,{required:!0,type:"number",id:"numOfChildren",name:"numOfChildren",value:r.numOfChildren,placeholder:"0",min:0,onChange:m})]})]})]}),e.jsx("div",{className:"form-group mt-2 mb-2",children:e.jsx("button",{type:"submit",className:"btn btn-hotel",onSubmit:O,children:"Continue"})})]})]})}),e.jsx("div",{className:"col-md-4",children:t&&e.jsx(ws,{booking:r,payment:p,isFormValid:s,onConfirm:S})})]})})})},Ss=()=>{const[s,o]=a.useState(""),[t,c]=a.useState(""),[l,i]=a.useState({photo:"",roomType:"",roomPrice:""}),{roomId:d}=z();return a.useEffect(()=>{setTimeout(()=>{M(d).then(n=>{i(n),c(!1)}).catch(n=>{o(n),c(!1)})},2e3)},[d]),e.jsxs("div",{children:[e.jsx("section",{className:"container",children:e.jsxs("div",{className:"row flex-column flex-md-row align-items-center",children:[e.jsx("div",{className:"col-md-4 mt-5 mb-5",children:t?e.jsx("p",{children:"Loading room information"}):s?e.jsx("p",{children:s}):e.jsxs("div",{className:"room-infor",children:[e.jsx("img",{src:l.photo,alt:"Room Photo",style:{width:"100%",height:"300px"}}),e.jsx("table",{className:"table table-bordered table-hover shadow",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Room Type:"}),e.jsx("th",{children:l.roomType})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Room Price:"}),e.jsxs("th",{children:["$",l.roomPrice]})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Room Service:"}),e.jsxs("td",{children:[e.jsxs("p",{children:[e.jsx(se,{}),"Wifi "]}),e.jsxs("p",{children:[e.jsx(De,{})," Netfilx Premium"]}),e.jsxs("p",{children:[e.jsx(oe,{})," Breakfast "]}),e.jsxs("p",{children:[e.jsx(Ie,{})," Min bar refreshment "]}),e.jsxs("p",{children:[e.jsx(Re,{})," Car Service "]}),e.jsxs("p",{children:[e.jsx(re,{})," Parking Space "]}),e.jsxs("p",{children:[e.jsx(te,{}),"Laundry"]})]})]})]})})]})}),e.jsx("div",{className:"col-md-8",children:e.jsx(Cs,{})})]})}),e.jsx("div",{className:"container",children:e.jsx(Y,{})})]})},Ds=()=>{var c,l;const s=_(),o=(c=s.state)==null?void 0:c.message,t=(l=s.state)==null?void 0:l.error;return e.jsxs("div",{className:"container",children:[e.jsx(Q,{title:"Booking Success"}),e.jsx("div",{className:"mt-5",children:o?e.jsxs("div",{children:[e.jsx("h3",{className:"text-success",children:"Booking Success !"}),e.jsx("p",{className:"text-success",children:o})]}):e.jsxs("div",{children:[e.jsx("h3",{className:"text-danger",children:"Error Booking Success!"}),e.jsx("p",{className:"text-danger",children:t})]})})]})},Is=({onDateChange:s,onFilterChange:o})=>{const[t,c]=a.useState({startDate:void 0,endDate:void 0,key:"selection"}),l=d=>{c(d.selection),s(d.selection.startDate,d.selection.endDate),o(d.selection.startDate,d.selection.endDate)},i=()=>{c({startDate:void 0,endDate:void 0,key:"selection"}),s(null,null),o(null,null)};return e.jsxs(e.Fragment,{children:[e.jsx("h5",{children:"Filter bookings by date"}),e.jsx(Oe.DateRangePicker,{ranges:[t],onChange:l,className:"mb-4"}),e.jsx("button",{className:"btn btn-secondary",onClick:i,children:"Clear Filter"})]})},Rs=({bookingInfo:s,handleBookingCancellation:o})=>{const[t,c]=a.useState(s),l=(n,r)=>{let h=s;n&&r&&(h=s.filter(x=>{const j=Z(x.checkInDate),m=Z(x.checkOutDate);return j>=n&&m<=r&&m>n})),c(h)};a.useEffect(()=>{c(s)},[s]);const i=(n,r)=>n+r,d=n=>$.find(h=>h.id===n).roomType;return e.jsxs("section",{className:"p-4",children:[e.jsx(Is,{onDateChange:l,onFilterChange:l}),e.jsxs("table",{className:"table table-bordered table-hover shadow",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S/N"}),e.jsx("th",{children:"Booking ID"}),e.jsx("th",{children:"Room ID"}),e.jsx("th",{children:"Room Type"}),e.jsx("th",{children:"check-In Date"}),e.jsx("th",{children:"check-Out Date"}),e.jsx("th",{children:"Guest Full Name"}),e.jsx("th",{children:"Guest Email"}),e.jsx("th",{children:"Adults"}),e.jsx("th",{children:"Children"}),e.jsx("th",{children:"Total Guest"}),e.jsx("th",{children:"Confirmation Code"}),e.jsx("th",{colSpan:2,children:"Actions"})]})}),e.jsx("tbody",{className:"text-center",children:t.map((n,r)=>e.jsxs("tr",{children:[e.jsx("td",{children:r+1}),e.jsx("td",{children:n.id}),e.jsx("td",{children:n.roomId}),e.jsx("td",{children:d(n.roomId)}),e.jsx("td",{children:n.checkInDate}),e.jsx("td",{children:n.checkOutDate}),e.jsx("td",{children:n.guestFullName}),e.jsx("td",{children:n.guestEmail}),e.jsx("td",{children:n.numOfAdults}),e.jsx("td",{children:n.numOfChildren}),e.jsx("td",{children:i(n.numOfAdults,n.numOfChildren)}),e.jsx("td",{children:n.bookingConfirmationCode}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>{o(n.id)},children:"Cancel"})})]},n.id))})]}),l.length===0&&e.jsx("p",{children:"No booking found for the selected dates."})]})},Ts=()=>{const[s,o]=a.useState([]),[t,c]=a.useState(!0),[l,i]=a.useState("");a.useEffect(()=>{setTimeout(()=>{J().then(n=>{o(n),c(!1)}).catch(n=>{i(n.message),c(!1)})},1e3)},[]);const d=async n=>{try{await ae(n);const r=await J();o(r)}catch(r){i(r.message)}};return e.jsxs("section",{style:{backgroundColor:"whitesmoke"},children:[e.jsx(Q,{title:"Existing Booking"}),l&&e.jsx("div",{className:"text-danger",children:l}),t?e.jsx("div",{children:"Loading existing bookings"}):e.jsx(Rs,{bookingInfo:s,handleBookingCancellation:d})]})},ee=()=>{const[s,o]=a.useState(""),[t,c]=a.useState(null),[l,i]=a.useState(""),[d,n]=a.useState(!1),[r,h]=a.useState({bookingId:"",room:{id:"",roomType:""},bookingConfirmationCode:"",roomNumber:"",checkInDate:"",checkOutDate:"",guestFullName:"",guestEmail:"",numOfAdults:"",numOfChildren:"",totalNumOfGuest:""}),[x,j]=a.useState(!1),m={bookingId:"",room:{id:"",roomType:""},bookingConfirmationCode:"",roomNumber:"",checkInDate:"",checkOutDate:"",guestFullName:"",guestEmail:"",numOfAdults:"",numOfChildren:"",totalNumOfGuest:""},u=S=>{o(S.target.value)},p=async S=>{S.preventDefault(),n(!0);try{const f=await ss(s);h(f)}catch(f){h(m),f.response&&S.response.status===404?c(f.response.data.message):c(f.response)}setTimeout(()=>{n(!1)},2e3)},y=async S=>{try{await ae(r.bookingId),j(!0),i("Booking has been cancelled successfully."),h(m),o(""),c("")}catch(f){c(f.message)}setTimeout(()=>{i(""),j(!1)},2e3)},T=(S,f)=>S+f,O=S=>$.find(D=>D.id===S).roomType;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`container mt-5 d-flex flex-column \r
            justify-content-center align-items-center`,children:[e.jsx("h2",{children:"Find My Booking"}),e.jsx("form",{onSubmit:p,className:"col-md-6",children:e.jsxs("div",{className:"input-group mb-3",children:[e.jsx("input",{className:"form-control",id:"confirmationCode",name:"confirmationCode",value:s,onChange:u,placeholder:"Enter the booking confirmation code"}),e.jsx("button",{className:"btn btn-hotel input-group-text",children:"Find booking"})]})}),d?e.jsx("div",{children:"Finding booking......"}):t?e.jsx("div",{className:"text-danger",children:t}):r.bookingConfirmationCode?e.jsxs("div",{className:"col-md-6 mt-4 mb-5",children:[e.jsxs("div",{style:{textAlign:"left",border:"0.1px solid black",borderRadius:"6px"},children:[e.jsx("h3",{children:"Booking Information"}),e.jsxs("p",{children:["Booking Confirmation Code:",r.bookingConfirmationCode]}),e.jsxs("p",{children:["Booking ID:",r.id]}),e.jsxs("p",{children:["Room Number:",r.roomId]}),e.jsxs("p",{children:["Room Type:",O(r.roomId)]}),e.jsxs("p",{children:["Check-in Date:",r.checkInDate]}),e.jsxs("p",{children:["Check-in Date:",r.checkOutDate]}),e.jsxs("p",{children:["Full Name:",r.guestFullName]}),e.jsxs("p",{children:["Email Address: ",r.guestEmail]}),e.jsxs("p",{children:["Adults:",r.numOfAdults]}),e.jsxs("p",{children:["Children:",r.numOfChildren]}),e.jsxs("p",{children:["Total Guest:",T(r.numOfAdults,r.numOfChildren)]})]}),!x&&e.jsx("button",{className:"btn btn-danger",onClick:()=>{y(r.bookId)},children:"Cancel Booking"})]}):e.jsx("div",{children:"find booking......"}),x&&e.jsx("div",{className:"alert alert-success mt-3",row:"alert",children:l})]})})},Fs=()=>{var x;const[s,o]=a.useState(""),[t,c]=a.useState({email:"",password:""}),l=L(),i=ps(),n=((x=_().state)==null?void 0:x.path)||"/",r=j=>{c({...t,[j.target.name]:j.target.value})},h=async j=>{j.preventDefault();const m=await rs();if(m){const u=m.token;i.handleLogin(u),l(n,{replace:!0})}else o("Invalid username or password. Please try again.");setTimeout(()=>{o("")},4e3)};return e.jsxs("section",{className:"container col-6 mt-5 mb-5",children:[s&&e.jsx("p",{className:"alert alert-danger",children:s}),e.jsx("h2",{children:"Login"}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"email",className:"col-sm-2 col-form-label",children:"Email"}),e.jsx("div",{children:e.jsx("input",{id:"email",name:"email",type:"email",className:"form-control",value:t.email,onChange:r})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"password",className:"col-sm-2 col-form-label",children:"Password"}),e.jsx("div",{children:e.jsx("input",{id:"password",name:"password",type:"password",className:"form-control",value:t.password,onChange:r})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("button",{type:"submit",className:"btn btn-hotel",style:{marginRight:"10px"},children:"Login"}),e.jsxs("span",{style:{marginLeft:"10px"},children:["Don't' have an account yet?",e.jsx(w,{to:"/register",children:" Register"})]})]})]})]})},Ps=()=>{const[s,o]=a.useState({firstName:"",lastName:"",email:"",password:""}),[t,c]=a.useState(""),[l,i]=a.useState(""),d=r=>{o({...s,[r.target.name]:r.target.value})},n=async r=>{r.preventDefault();try{const h=await ts(s);i(h),c(""),o({firstName:"",lastName:"",email:"",password:""})}catch(h){i(""),c(`Registration error : ${h.message}`)}setTimeout(()=>{c(""),i("")},5e3)};return e.jsxs("section",{className:"container col-6 mt-5 mb-5",children:[t&&e.jsx("p",{className:"alert alert-danger",children:t}),l&&e.jsx("p",{className:"alert alert-success",children:l}),e.jsx("h2",{children:"Register"}),e.jsxs("form",{onSubmit:n,children:[e.jsxs("div",{className:"mb-3 row",children:[e.jsx("label",{htmlFor:"firstName",className:"col-sm-2 col-form-label",children:"first Name"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{id:"firstName",name:"firstName",type:"text",className:"form-control",value:s.firstName,onChange:d})})]}),e.jsxs("div",{className:"mb-3 row",children:[e.jsx("label",{htmlFor:"lastName",className:"col-sm-2 col-form-label",children:"Last Name"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{id:"lastName",name:"lastName",type:"text",className:"form-control",value:s.lastName,onChange:d})})]}),e.jsxs("div",{className:"mb-3 row",children:[e.jsx("label",{htmlFor:"email",className:"col-sm-2 col-form-label",children:"Email"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{id:"email",name:"email",type:"email",className:"form-control",value:s.email,onChange:d})})]}),e.jsxs("div",{className:"mb-3 row",children:[e.jsx("label",{htmlFor:"password",className:"col-sm-2 col-form-label",children:"Password"}),e.jsx("div",{className:"col-sm-10",children:e.jsx("input",{type:"password",className:"form-control",id:"password",name:"password",value:s.password,onChange:d})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("button",{type:"submit",className:"btn btn-hotel",style:{marginRight:"10px"},children:"Register"}),e.jsxs("span",{style:{marginLeft:"10px"},children:["Already have an account? ",e.jsx(w,{to:"/login",children:"Login"})]})]})]})]})},Os=()=>{const[s,o]=a.useState({id:"",email:"",firstName:"",lastName:"",roles:[{id:"",name:""}]}),[t,c]=a.useState([{id:"",room:{id:"",roomType:""},checkInDate:"",checkOutDate:"",bookingConfirmationCode:""}]),[l,i]=a.useState(""),[d,n]=a.useState(""),r=L(),h=localStorage.getItem("userId"),x=localStorage.getItem("token");a.useEffect(()=>{(async()=>{try{const u=await as(h,x);o(u)}catch(u){console.error(u)}})()},[h]),a.useEffect(()=>{(async()=>{try{const u=await ls(h,x);c(u)}catch(u){console.error("Error fetching bookings:",u.message),n(u.message)}})()},[h]);const j=async()=>{window.confirm("Are you sure you want to delete your account? This action cannot be undone.")&&await ns(h).then(u=>{i(u.data),localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("userRole"),r("/"),window.location.reload()}).catch(u=>{n(u.data)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container",children:[d&&e.jsx("p",{className:"text-danger",children:d}),l&&e.jsx("p",{className:"text-danger",children:l}),e.jsxs("div",{className:"card p-5 mt-5",style:{backgroundColor:"whitesmoke"},children:[e.jsx("h4",{className:"card-title text-center",children:"User Information"}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"col-md-10 mx-auto",children:[e.jsx("div",{className:"card mb-3 shadow",children:e.jsxs("div",{className:"row g-0",children:[e.jsx("div",{className:"col-md-2",children:e.jsx("div",{className:"d-flex justify-content-center align-items-center mb-4",children:e.jsx("img",{src:"https://themindfulaimanifesto.org/wp-content/uploads/2020/09/male-placeholder-image.jpeg",alt:"Profile",className:"rounded-circle",style:{width:"150px",height:"150px",objectFit:"cover"}})})}),e.jsx("div",{className:"col-md-10",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-md-2 col-form-label fw-bold",children:"ID:"}),e.jsx("div",{className:"col-md-10",children:e.jsx("p",{className:"card-text",children:s.id})})]}),e.jsx("hr",{}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-md-2 col-form-label fw-bold",children:"First Name:"}),e.jsx("div",{className:"col-md-10",children:e.jsx("p",{className:"card-text",children:s.firstName})})]}),e.jsx("hr",{}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-md-2 col-form-label fw-bold",children:"Last Name:"}),e.jsx("div",{className:"col-md-10",children:e.jsx("p",{className:"card-text",children:s.lastName})})]}),e.jsx("hr",{}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-md-2 col-form-label fw-bold",children:"Email:"}),e.jsx("div",{className:"col-md-10",children:e.jsx("p",{className:"card-text",children:s.email})})]}),e.jsx("hr",{}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-md-2 col-form-label fw-bold",children:"Roles:"}),e.jsx("div",{className:"col-md-10",children:e.jsx("ul",{className:"list-unstyled",children:s.roles.map(m=>e.jsx("li",{className:"card-text",children:m.name},m.id))})})]})]})})]})}),e.jsx("h4",{className:"card-title text-center",children:"Booking History"}),e.jsxs("table",{className:"table table-bordered table-hover shadow",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Booking ID"}),e.jsx("th",{scope:"col",children:"Room ID"}),e.jsx("th",{scope:"col",children:"Room Type"}),e.jsx("th",{scope:"col",children:"Check In Date"}),e.jsx("th",{scope:"col",children:"Check Out Date"}),e.jsx("th",{scope:"col",children:"Confirmation Code"}),e.jsx("th",{scope:"col",children:"Status"})]})}),e.jsx("tbody",{children:t.map((m,u)=>e.jsxs("tr",{children:[e.jsx("td",{children:m.id}),e.jsx("td",{children:m.room.id}),e.jsx("td",{children:m.room.roomType}),e.jsx("td",{children:k(m.checkInDate).subtract(1,"month").format("MMM Do, YYYY")}),e.jsx("td",{children:k(m.checkOutDate).subtract(1,"month").format("MMM Do, YYYY")}),e.jsx("td",{children:m.bookingConfirmationCode}),e.jsx("td",{className:"text-success",children:"On-going"})]},u))})]}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("div",{className:"mx-2",children:e.jsx("button",{className:"btn btn-danger btn-sm",onClick:j,children:"Close account"})})})]})})]})]})})},Es=({children:s})=>{const o=localStorage.getItem("userId"),t=_();return o?s:e.jsx(Te,{to:"/login",state:{path:t.pathname}})};function Bs(){return e.jsx(gs,{children:e.jsxs("main",{children:[e.jsxs(xe,{children:[e.jsx(bs,{}),e.jsxs(Fe,{children:[e.jsx(C,{path:"/",element:e.jsx(xs,{})}),e.jsx(C,{path:"/edit-room/:roomId",element:e.jsx(js,{})}),e.jsx(C,{path:"/existing-rooms",element:e.jsx(is,{})}),e.jsx(C,{path:"/add-room",element:e.jsx(cs,{})}),e.jsx(C,{path:"/book-room/:roomId",element:e.jsx(Es,{children:e.jsx(Ss,{})})}),e.jsx(C,{path:"/browse-all-rooms",element:e.jsx(vs,{})}),e.jsx(C,{path:"/admin",element:e.jsx(ks,{})}),e.jsx(C,{path:"/booking-success",element:e.jsx(Ds,{})}),e.jsx(C,{path:"/existing-bookings",element:e.jsx(Ts,{})}),e.jsx(C,{path:"/find-booking",element:e.jsx(ee,{})}),e.jsx(C,{path:"/login",element:e.jsx(Fs,{})}),e.jsx(C,{path:"/register",element:e.jsx(Ps,{})}),e.jsx(C,{path:"/profile",element:e.jsx(Os,{})}),e.jsx(C,{path:"/logout",element:e.jsx(ee,{})})]})]}),e.jsx(Ns,{})]})})}he.createRoot(document.getElementById("root")).render(e.jsx(me.StrictMode,{children:e.jsx(Bs,{})}));
